---
title: "AWS Basic 01"
excerpt_separator: "<!--more-->"
categories:
  - AWS
tags:
  - AWS
sidebar:
  nav: "docs"
---
## 서론

실제로 AWS 환경을 구축할 기회가 없는 것이 너무나도 아쉽다.

다만 회사 내에서 AWS 를 중심으로 한 클라우드 환경이 활발하게 만들어져 있고, 일부 사용하는 서비스에 대한 내용을 내 나름대로 정리해 둘 필요성이 있을 것 같아 포스팅을 하게 되었다.

## 사용자

- root 계정 : admin 계정으로, 아무나 사용할 수 없다 → MFA(다단계 인증) 설정 후 사용을 삼가는 것을 추천
- IAM 사용자 : 일반 계정. root 계정 아래 여러 계정을 추가하여, 각각의 필요한 권한을 부여하여 사용 가능
- 리눅스와 같은 사용자 구조라 이해하면 될 듯

## 리전

- 리전 : 전세계의 물리적인 데이터센터를 클러스터화한 물리적인 위치
- 가용 영역(AZ) : 하나의 리전을 구성하는 각각의 그룹
    - 리전의 중복 전력, 네트워킹 및 연결이 제공되는 하나 이상의 개별 데이터 센터로 구성
    - 한국에는 데이터센터가 4 곳에 위치
- Q. vmware 의 vmotion 처럼 인스턴스를 가상으로 이동하는 것이 가능한가?
    - A. 가능하다! AWS 에서도 Vmotion 처럼 인스턴스를 이미지화시켜 이동시키는 방식

## 액세스 방법

- 콘솔 액세스 : 콘솔 내에서 직접 액세스하는 방법
- 프로그래밍 액세스 : 액세스 키를 생성 후 프로그래밍 안에 넣어서 사용하는 방법

## EC2

AWS 의 가상 서버. 단위는 인스턴스

### 인스턴스 유형

가상 서버의 스펙별로 CPU, Memory, Disk 등이 구별되어 있다.

- t : 테스트용 -> 개발계의 서버는 t3 사용이 많다
    - t3a : AMD CPU 가 달려있는 경우 (통상적으로 intel 제품을 사용하는 편)
    - t3g : AWS 에서 직접 개발한 칩셋의 CPU 를 제공. AWS 자체적으로 만든 것이기 때문에 저렴하지만 확실히 검증되지 않아 운영계 쪽에서는 거의 사용하지 않음
- n : nano
- c : cpu 에 특화한 유형
    - c-n : 네트워크 속도를 가속화한 유형
    - ec2 한 대 당 네트워크 제한이 걸려있는데, 해당 유형은 그 제한이 좀 덜한 편
- m : 가장 보편적으로 사용하는 유형
- r : RAM 에 특화된 유형
- i : SSD 가 기본적으로 장착되어 자체 스토리지 영역을 가지고 있는 유형
    - MVME : 일반적으로 SATA 타입의 SSSD 보다 더 빠른, SSD 의 한 종류
        - EC2 를 셧다운하면 디스크 내용이 한 번에 날아가는 휘발성인 만큼 무료로 제공
        - IOPS 의 속도가 매우 빠름

※ amazon machine image : 기존 이미지를 가상 서버 위에 띄우는 방식

※ myami : 기본 AMI 에 원하는 소프트웨어 등을 추가해서 사용자 정의로 사용 가능한 이미지 파일

## EBS

- elastic block storage 의 약자로, AWS 전용 하드디스크의 개념
- GP3 을 가장 많이 사용 : 블록 스토리지 용량을 추가로 프로비저닝할 필요 없이 IOPS와 처리량을 독립적으로 늘릴 수 있게 해 줌

## VPC

사용자가 정의하는 가상의 네트워크 대역으로, 그 아래 서브넷을 복수로 나누어서 설정 가능

### 라우팅 테이블 / 인터넷 게이트웨이

- 라우팅 테이블 : 네트워크 트래픽을 전달할 위치를 결정하는 데 사용하는 라우팅이라는 이름의 규칙 집합
- 인터넷 게이트웨이 : VPC의 리소스와 인터넷 간의 통신을 활성화하기 위해 VPC에 연결하는 게이트웨이
- 외부 인터넷을 사용하려면? 외부 인터넷 게이트웨이를 라우팅 케이블에 넣어주어야 한다

### NAT 게이트웨이

- 네트워크 주소 변환 서비스
- VPC 내부의 EC2 인스턴스에 대해 아웃바운드(인스턴스에서 VPC 외부로 나감)는 가능케 하지만, 인바운드(VCP 외부로부터 해당 인스턴스로 접근)는 불가하게 하는 기능

### Route 53

- AWS DNS 서비스

## IP Address

- Private IP : 인터넷을 통해 연결할 수 없는 IP 주소
- Public IP : 인터넷을 통해 연결할 수 있는 IP 주소. 전세계적으로 유일한 IP 여야 함
- Elastic IP : AWS 의 EC2 인스턴스는 기본적으로 부여된 IP 주소가 서버를 재부팅할 때마다 바뀐다. 이 때  Elastic IP 를 할당받아 IP 를 고정시키면 EC2 재시작 후에도 주소가 바뀌지 않음

## Database

- RDS : 인스턴스 이미지 위에 원하는 이미지의 DB 가 세팅된 상태로 서비스가 작동. SSH 접속 불가
- Aurora : RDS 의 일부로, MySQL 이나 PostgreSQL 로 구성된 RDS 를 클러스터처럼 한 겹 더 싸서 사용하는 방식
    - 자동 페일오버 기능이 추가되어 있는데, 복구 시간은 RDS 보다 더 소요된다.
    - writer(master) / reader(slave) 로 구분됨

[DB 관련 서비스 타입](https://www.notion.so/df7180c8756546cfa059a96955890886)

## s3

AWS 의 오브젝트(객체) 스토리지(보통은 블록 스토리지를 많이 사용)

<aside>
💡 객체 스토리지 : '오브젝트(객체)' 라 불리는 독립된 유닛에 데이터를 저장, 관리하는 데이터 스토리지 아키텍쳐

</aside>

<aside>
💡 블록 스토리지 : 데이터를 '블록'이라 하는 별도의 조각으로 분리하여 저장하는 아키텍쳐

</aside>

- 모든 S3 는 '버킷'으로 관리되고, 그 버킷의 디렉토리 경로가 URL  형식으로 생성되어 REST API 로 버킷 호출이 가능하다.
- Standard : 갱신이 빈번한 데이터 저장
- Glacier : Cold Storage. 가장 낮은 비용으로 데이터 저장 가능. 단, 해당 데이터 꺼낼 때 비용이 큼
- 일반 NAS 처럼 사용할 수는 있으나 오브젝트 스토리지이므로 실제로 그렇게는 사용하지 않는다

<aside>
💡 NAS(네트워크 연결형 저장소) : LAN 등의 네트워크 연결을 통해 데이터를 저장할 수 있는 저장 장치

</aside>

- elasticsearch 백업을 이걸로 사용하고 있음
    - 30일 후에 서버에서 S3 로 백업을 돌리고, 90일 지나면 인덱스 삭제하도록 삭제. 1년 지나면 S3 에 저장된 스냅샷까지 삭제

## NoSQL 계

AWS 에서 Opensource 를 가져와서 자체 서비스화시키는 추세가 가속화되고 있다.

[AWS 의 NoSQL 서비스](https://www.notion.so/53e6c7de7f764f5794c601bec06e4411)

- Athena : 파일을 쿼리로 만들어주는 서비스로, 완전한 서버리스 구조. 쿼리를 많이 날릴수록!
